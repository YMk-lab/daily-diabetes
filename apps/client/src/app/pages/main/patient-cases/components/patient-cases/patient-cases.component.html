<div class='dd-patient-cases-container' *ngIf='caseGroups; else isLoading'>

  <div class='dd-empty-cases-list' *ngIf='!(caseGroups && caseGroups.length)'>

    <h3>{{ 'PATIENT_CASES.EMPTY_CASE_LIST_TITLE' | translate }}</h3>
    <button mat-mini-fab color='primary' (click)='openNewCaseModal()'>
      +
    </button>

  </div>

  <ng-container *ngIf='caseGroups && caseGroups.length'>

    <div class='dd-patient-cases-actions-panel' *ngIf='caseGroups && caseGroups.length'>

      <button mat-mini-fab color='primary' (click)='openNewCaseModal()'>
        +
      </button>

    </div>

    <table class='dd-patient-cases-group-table' mat-table [dataSource]='caseGroups'>

      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef>Current day</th>
        <td mat-cell *matCellDef="let element">

          <ng-container>
            {{ element.title | date: 'dd.MM.YYYY' }}
          </ng-container>

        </td>
      </ng-container>

      <ng-container matColumnDef="lastIndication">
        <th mat-header-cell *matHeaderCellDef>Last glucose indication</th>
        <td mat-cell *matCellDef="let element">{{ element.lastIndication }} {{ element.lastIndicationType }}</td>
      </ng-container>

      <ng-container matColumnDef="lastShortInsulin">
        <th mat-header-cell *matHeaderCellDef>Last injected short insulin</th>
        <td mat-cell *matCellDef="let element">{{ element.lastShortInsulin }} Un.</td>
      </ng-container>

      <ng-container matColumnDef="lastBaseInsulin">
        <th mat-header-cell *matHeaderCellDef>Last injected base insulin</th>
        <td mat-cell *matCellDef="let element">{{ element.lastBaseInsulin }} Un.</td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let element"></td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="groupsTableColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: groupsTableColumns;"></tr>
    </table>

    <mat-paginator [pageSizeOptions]="[13]"
                   [length]='caseGroups.length'
                   showFirstLastButtons>
    </mat-paginator>

  </ng-container>

</div>

<ng-template #isLoading>

  <div class='dd-progress-bar-onload'>
    <mat-progress-bar mode='buffer'></mat-progress-bar>
  </div>

</ng-template>
