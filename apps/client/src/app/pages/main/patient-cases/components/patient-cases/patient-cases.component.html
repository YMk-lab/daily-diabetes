<div class='dd-patient-cases-container' *ngIf='caseGroups; else isLoading'>

  <div class='dd-empty-cases-list' *ngIf='!(caseGroups && caseGroups.length)'>

    <h3>{{ 'PATIENT_CASES.EMPTY_CASE_LIST_TITLE' | translate }}</h3>
    <button mat-mini-fab color='primary' (click)='openNewCaseModal()'>
      +
    </button>

  </div>

  <ng-container *ngIf='caseGroups && caseGroups.length'>

    <div class='dd-patient-cases-actions-panel' *ngIf='caseGroups && caseGroups.length'>

      <button mat-mini-fab color='primary' (click)='openNewCaseModal()'>
        +
      </button>

      <button mat-mini-fab color='primary'>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
             viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
<g>
	<g>
		<path d="M490.667,405.333h-56.811C424.619,374.592,396.373,352,362.667,352s-61.931,22.592-71.189,53.333H21.333
			C9.557,405.333,0,414.891,0,426.667S9.557,448,21.333,448h270.144c9.237,30.741,37.483,53.333,71.189,53.333
			s61.931-22.592,71.189-53.333h56.811c11.797,0,21.333-9.557,21.333-21.333S502.464,405.333,490.667,405.333z M362.667,458.667
			c-17.643,0-32-14.357-32-32s14.357-32,32-32s32,14.357,32,32S380.309,458.667,362.667,458.667z"/>
	</g>
</g>
          <g>
	<g>
		<path d="M490.667,64h-56.811c-9.259-30.741-37.483-53.333-71.189-53.333S300.736,33.259,291.477,64H21.333
			C9.557,64,0,73.557,0,85.333s9.557,21.333,21.333,21.333h270.144C300.736,137.408,328.96,160,362.667,160
			s61.931-22.592,71.189-53.333h56.811c11.797,0,21.333-9.557,21.333-21.333S502.464,64,490.667,64z M362.667,117.333
			c-17.643,0-32-14.357-32-32c0-17.643,14.357-32,32-32s32,14.357,32,32C394.667,102.976,380.309,117.333,362.667,117.333z"/>
	</g>
</g>
          <g>
	<g>
		<path d="M490.667,234.667H220.523c-9.259-30.741-37.483-53.333-71.189-53.333s-61.931,22.592-71.189,53.333H21.333
			C9.557,234.667,0,244.224,0,256c0,11.776,9.557,21.333,21.333,21.333h56.811c9.259,30.741,37.483,53.333,71.189,53.333
			s61.931-22.592,71.189-53.333h270.144c11.797,0,21.333-9.557,21.333-21.333C512,244.224,502.464,234.667,490.667,234.667z
			 M149.333,288c-17.643,0-32-14.357-32-32s14.357-32,32-32c17.643,0,32,14.357,32,32S166.976,288,149.333,288z"/>
	</g>
</g>
          <g>
</g>
          <g>
</g>
          <g>
</g>
          <g>
</g>
          <g>
</g>
          <g>
</g>
          <g>
</g>
          <g>
</g>
          <g>
</g>
          <g>
</g>
          <g>
</g>
          <g>
</g>
          <g>
</g>
          <g>
</g>
          <g>
</g>
</svg>
      </button>

    </div>

    <table class='dd-patient-cases-group-table' mat-table [dataSource]='caseGroups'>

      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef>
          {{ 'PATIENT_CASES.CASE_TABLE.DATE' | translate }}
        </th>
        <td mat-cell *matCellDef="let element">

          <ng-container>
            {{ element.title }}
          </ng-container>

        </td>
      </ng-container>

      <ng-container matColumnDef="lastIndication">
        <th mat-header-cell *matHeaderCellDef>
          {{ 'PATIENT_CASES.CASE_TABLE.GLUCOSE_INDICATION_TITLE' | translate }}
        </th>
        <td mat-cell *matCellDef="let element">{{ element.lastIndication }} {{ element.lastIndicationType }}</td>
      </ng-container>

      <ng-container matColumnDef="lastShortInsulin">
        <th mat-header-cell *matHeaderCellDef>
          {{ 'PATIENT_CASES.CASE_TABLE.SHORT_INSULIN_TITLE' | translate }}
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.lastShortInsulin }} {{ 'PATIENT_CASES.CASE_TABLE.UNITS_SUFFIX' | translate }}
        </td>
      </ng-container>

      <ng-container matColumnDef="lastBaseInsulin">
        <th mat-header-cell *matHeaderCellDef>
          {{ 'PATIENT_CASES.CASE_TABLE.BASE_INSULIN_TITLE' | translate }}
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.lastBaseInsulin }} {{ 'PATIENT_CASES.CASE_TABLE.UNITS_SUFFIX' | translate }}
        </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>
          {{ 'PATIENT_CASES.CASE_TABLE.ACTIONS' | translate }}
        </th>
        <td mat-cell *matCellDef="let element">

          <svg (click)='generatePDF(element)' width="25px" height="25px" viewBox="0 0 13 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <g id="V2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
              <g id="V2.2_Historie" transform="translate(-1195.000000, -68.000000)" fill="#999" fill-rule="nonzero">
                <g id="Icon/pdf-green" transform="translate(1195.000000, 68.000000)">
                  <path d="M2.8,0 C2.03402171,0 1.4,0.63402171 1.4,1.4 L1.4,4.9 C0.6265,4.9 1.82076576e-13,5.5265 1.82076576e-13,6.3 L1.82076576e-13,9.8 C1.82076576e-13,10.5735 0.6265,11.2 1.4,11.2 L1.4,12.6 C1.4,13.3659785 2.03402171,14 2.8,14 L11.2,14 C11.9659785,14 12.6,13.3659785 12.6,12.6 L12.6,3.5 L9.1,0 L2.8,0 Z M2.8,1.4 L8.4,1.4 L8.4,4.2 L11.2,4.2 L11.2,4.9 L2.8,4.9 L2.8,1.4 Z M1.4,6.3 L2.45,6.3 C3.0296,6.3 3.5,6.7704 3.5,7.35 C3.5,7.9296 3.0296,8.4 2.45,8.4 L2.1,8.4 L2.1,9.8 L1.4,9.8 L1.4,6.3 Z M7.7,6.3 L9.8,6.3 L9.8,7 L8.4,7 L8.4,7.7 L9.5197263,7.7 L9.5197263,8.4 L8.4,8.4 L8.4,9.8 L7.7,9.8 L7.7,6.3 Z M4.2,6.3164066 L5.34023434,6.3164066 C6.4476342,6.3164066 7,6.9824342 7,7.7902342 L7,8.3302737 C7,9.1478737 6.4464638,9.8 5.33066408,9.8 L4.2,9.8 L4.2,6.3164066 Z M2.1,7 L2.1,7.7 L2.45,7.7 C2.6432,7.7 2.8,7.5432 2.8,7.35 C2.8,7.1568 2.6432,7 2.45,7 L2.1,7 Z M4.9,7.0164066 L4.9,9.1 L5.33066408,9.1 C5.7730638,9.1 6.3,8.9658737 6.3,8.3302737 L6.3,7.7902342 C6.3,7.1504342 5.7784342,7.0164066 5.34023434,7.0164066 L4.9,7.0164066 Z M2.8,11.2 L11.2,11.2 L11.2,12.6 L2.8,12.6 L2.8,11.2 Z" id="Shape"></path>
                </g>
              </g>
            </g>
          </svg>

          <svg (click)='delete(element)' width="25px" height="25px" viewBox="0 0 13 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <g id="User-Management" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
              <g id="Dok.verwaltung/Dok.Typ/Bearbeiten" transform="translate(-862.000000, -44.000000)" fill="#fff" fill-rule="nonzero">
                <g id="Group-2" transform="translate(495.000000, 20.000000)">
                  <path d="M371.9,24 L371.2,24.7 L367,24.7 L367,26.1 L379.6,26.1 L379.6,24.7 L375.4,24.7 L374.7,24 L371.9,24 Z M367.955664,27.5 L369.024805,36.7845704 C369.117205,37.4775704 369.7139,38 370.4125,38 L376.186133,38 C376.884733,38 377.482095,37.4784013 377.575195,36.7791013 L378.644336,27.5 L367.955664,27.5 Z" id="Shape-Copy-4"></path>
                </g>
              </g>
            </g>
          </svg>

        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="groupsTableColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: groupsTableColumns;"></tr>
    </table>

    <mat-paginator [pageSizeOptions]="[13]"
                   [length]='caseGroups.length'>
    </mat-paginator>

  </ng-container>

</div>

<ng-template #isLoading>

  <div class='dd-progress-bar-onload'>
    <mat-progress-bar mode='buffer'></mat-progress-bar>
  </div>

</ng-template>
